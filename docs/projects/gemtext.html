<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html lang="en" xml:lang="en"><body><h1>Scheme Gemtext Reader</h1><p>siiky<br></br>2022/07/05<br></br>2022/07/05</p><p>Yesterday I made a Scheme library to read Gemtext into a simple AST: a list of lines of text, headers, links, list blocks, or code blocks.</p><h2>Text</h2><pre>some text
</pre><pre>&quot;some text&quot;
</pre><p>Just a string, not tagged in any way. Empty lines are kept.</p><h2>Headers</h2><pre>^(#+)\s+(.*)$
</pre><pre>`(header ,(string-length $1) ,$2)
</pre><p>If *strict-gemtext-headers* is enabled, header lines of level &gt; 3 are not considered headers.</p><pre>##### title
</pre><pre>&quot;##### title&quot;       ; (w/ *strict-gemtext-headers* enabled)
&#39;(header 5 &quot;title&quot;) ; (w/ *strict-gemtext-headers* disabled)
</pre><h2>Links</h2><pre>=&gt; some-uri.gmi Optional alt text
</pre><pre>&#39;(link &quot;some-uri.gmi&quot; &quot;Optional alt text&quot;)
</pre><p>If there&#39;s no alt text, the empty string is used:</p><pre>=&gt; some-uri.gmi
</pre><pre>&#39;(link &quot;some-uri.gmi&quot; &quot;&quot;)
</pre><h2>Lists</h2><pre>* item 1
* item 2
</pre><pre>&#39;(list &quot;item 1&quot;
       &quot;item 2&quot;)
</pre><h2>Code blocks</h2><p>(pretend there&#39;s no space between the three backticks)</p><pre>`` `some optional alt text
some
pre-formatted
text
`` `
</pre><pre>&#39;(code &quot;some optional alt text&quot;
       &quot;some&quot;
       &quot;pre-formatted&quot;
       &quot;text&quot;)
</pre><p>If there&#39;s no alt text, the empty string is used:</p><pre>`` `some optional alt text
some
pre-formatted
text
`` `
</pre><pre>&#39;(code &quot;&quot;
       &quot;some&quot;
       &quot;pre-formatted&quot;
       &quot;text&quot;)
</pre><h2>Example</h2><pre># Factorial

There are two steps to compute the factorial of a number:

* Compute the list of integers from 1 up to the number
* Multiply all the integers of the list

=&gt; gemini://gemi.dev/cgi-bin/wp.cgi/view/en?Factorial
=&gt; gemini://gemi.dev/cgi-bin/wp.cgi/view/en?Factorial Factorial

## Haskell code

Here&#39;s the code in Haskell:

`` `hs
fact n = prod [1..n]
`` `
</pre><pre>&#39;((header 1 &quot;Factorial&quot;)
  &quot;&quot;
  &quot;There are two steps to compute the factorial of a number:&quot;
  &quot;&quot;
  (list &quot;Compute the list of integers from 1 up to the number&quot;
        &quot;Multiply all the integers of the list&quot;)
  &quot;&quot;
  (link &quot;gemini://gemi.dev/cgi-bin/wp.cgi/view/en?Factorial&quot; &quot;&quot;)
  (link &quot;gemini://gemi.dev/cgi-bin/wp.cgi/view/en?Factorial&quot; &quot;Factorial&quot;)
  &quot;&quot;
  (header 2 &quot;Haskell code&quot;)
  &quot;&quot;
  &quot;Here&#39;s the code in Haskell:&quot;
  &quot;&quot;
  (code &quot;hs&quot;
        &quot;fact n = prod [1..n]&quot;))
</pre><h2>Output Patterns</h2><pre>(header level title)
(link uri alt-text)
(code alt-text . lines)
(list . items)
</pre></body></html>